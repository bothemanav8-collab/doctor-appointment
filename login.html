<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login - Doctor Appointment</title>
<link rel="stylesheet" href="style.css">
<style>
body {
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg,#6c5ce7,#00b894);
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  margin:0;
}

.form-section {
  background:#fff;
  padding:30px 40px;
  border-radius:12px;
  box-shadow:0 10px 25px rgba(0,0,0,0.2);
  width:100%;
  max-width:400px;
}

h2 {
  text-align:center;
  margin-bottom:25px;
  color:#333;
}

input {
  width:100%;
  padding:12px;
  margin:10px 0;
  border-radius:6px;
  border:1px solid #ccc;
  font-size:16px;
  transition:0.3s;
}

input:focus {
  border-color:#6c5ce7;
  box-shadow:0 0 5px rgba(108,92,231,0.5);
  outline:none;
}

button {
  width:100%;
  padding:12px;
  margin-top:15px;
  border:none;
  border-radius:6px;
  background:#6c5ce7;
  color:#fff;
  font-size:16px;
  cursor:pointer;
  transition:0.3s;
}

button:hover {
  background:#5a4bcf;
}

#msg {
  text-align:center;
  margin-top:15px;
  font-weight:600;
}

#msg.success { color:green; }
#msg.error { color:red; }

p {
  text-align:center;
  margin-top:15px;
}

a {
  color:#6c5ce7;
  text-decoration:none;
  font-weight:500;
}

a:hover {
  text-decoration:underline;
}
</style>
</head>
<body>

<section class="form-section">
  <h2>Login</h2>
  <form id="loginForm">
    <input type="email" id="email" placeholder="Email" required>
    <input type="password" id="password" placeholder="Password" required>
    <button type="submit">Login</button>
  </form>
  <p id="msg"></p>
  <p>Don't have an account? <a href="signup.html">Sign up</a></p>
</section>

<script>
document.getElementById("loginForm").addEventListener("submit", async e=>{
  e.preventDefault();

  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value.trim();
  const msgEl = document.getElementById("msg");

  if(!email || !password){
    msgEl.textContent = "Please fill all fields!";
    msgEl.className = "error";
    return;
  }

  try {
    const res = await fetch("/login",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({email,password})
    });

    const data = await res.json();
    msgEl.textContent = data.message;
    msgEl.className = data.success ? "success" : "error";

    if(data.success){
      localStorage.setItem("userEmail", email);
      localStorage.setItem("userName", data.username);
      setTimeout(()=> window.location.href="index.html",1000);
    }
  } catch(err){
    msgEl.textContent = "Server error! Try again.";
    msgEl.className = "error";
  }
});
</script>

</body>
</html>
